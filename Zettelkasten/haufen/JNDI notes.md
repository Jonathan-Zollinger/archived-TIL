
passing a blank string to the `getschema` method retrieves the root object schema
`Dircontext.getSchema("")`

calling `getAttributes` on a `DirContext` object doesn't work, it will return an Attributes object with a "no attributes" value.

to retrieve an eDir object class' schema, call `getAttributes` with `ClassDefinition/` prepended to the name of the object class.
```java
context.getSchema("").getAttributes("ClassDefinition/inetOrgPerson");
```

I dont know why, but this does NOT work if you attempt to combine the methods into the following.

```java
context.getAttributes("", new String[]{"ClassDefinition/inetOrgPerson"});
// returns "No attributes" object
```

https://docs.oracle.com/javase/jndi/tutorial/

get all object class definitions for an entry. 



```java
// Get context containing class definitions for the "cn=Ted Geisel" entry
DirContext tedClasses = ctx.getSchemaClassDefinition("cn=Ted Geisel, ou=People");

// Enumerate the class definitions
NamingEnumeration namingEnum = tedClasses.search("", null);
while (namingEnum.hasMore()) {
    System.out.println(namingEnum.next());
}
```

See [full source of example](https://docs.oracle.com/javase/jndi/tutorial/ldap/schema/src/GetClassDefn.java), `NamingEnumuration<SearchResult>` [docs](https://docs.oracle.com/javase/8/docs/api/javax/naming/NamingEnumeration.html), and `SearchResult` [docs](https://docs.oracle.com/javase/8/docs/api/javax/naming/directory/SearchResult.html)

[example](https://docs.oracle.com/javase/jndi/tutorial/ldap/schema/example.html) to query the object class definition

[LDAP v3 definitions](https://www.ietf.org/rfc/rfc2251.txt)

works: `context.getSchemaClassDefinition("cn=xzavier.friesen,o=users").listBindings("")`


Best Route thus far: 
```java
NamingEnumeration<SearchResult> searchResults = context
                .getSchemaClassDefinition(getRequiredDn(dn))
                .search("", null);
        while(searchResults.hasMore()) {
            SearchResult result = searchResults.nextElement();
            NamingEnumeration<? extends Attribute> allAttributes = result.getAttributes().getAll();
            while(allAttributes.hasMore()) {
                attributeList.add(allAttributes.nextElement());
            }
        }
```


----

I believe you can change the returned type of DirContext.SearchResult(). 
https://docs.oracle.com/javase/8/docs/api/javax/naming/directory/SearchControls.html#setReturningAttributes-java.lang.String:A-
```java
SearchControls ctls = new SearchControls();
ctls.setReturningObjFlag(true);

// Specify the search filter to match any object
String filter = "(objectclass=*)";

// Search for objects by using the filter
NamingEnumeration answer = ctx.search("", filter, ctls);
```

#### [Quick Overview of Search Filter Syntax](https://docs.oracle.com/javase/jndi/tutorial/basics/directory/filter.html)

The search filter syntax is basically a logical expression in prefix notation (that is, the logical operator appears before its arguments). The following table lists the symbols used for creating filters.

| Symbol | Description                                                                                                             |
| ------ | ----------------------------------------------------------------------------------------------------------------------- |
| &      | conjunction (i.e., _and_ -- all in list must be true)                                                                   |
| \|     | disjunction (i.e., _or_ -- one or more alternatives must be true)                                                       |
| !      | negation (i.e., _not_ -- the item being negated must not be true)                                                       |
| =      | equality (according to the matching rule of the attribute)                                                              |
| ~=     | approximate equality (according to the matching rule of the attribute)                                                  |
| >=     | greater than (according to the matching rule of the attribute)                                                          |
| <=     | less than (according to the matching rule of the attribute)                                                             |
| =*     | presence (i.e., the entry must have the attribute but its value is irrelevant)                                          |
| *      | wildcard (indicates zero or more characters can occur in that position); used when specifying attribute values to match |
| \      | escape (for escaping '*', '(', or ')' when they occur inside an attribute value)                                        |
[source](https://docs.oracle.com/javase/jndi/tutorial/basics/directory/filter.html)


---
```java
// Get the schema tree root
DirContext schema = ctx.getSchema("");

// Get the schema object for "cn"
DirContext cnSchema = (DirContext)schema.lookup("AttributeDefinition/cn");
```


[working with naming conventions unique from standard LDAP](https://docs.oracle.com/javase/jndi/tutorial/ldap/referral/jndi.html)


## Really Useful for Querying Schema 
`DirContext.getSchema("").listBindings("")` will give you everything you can call from  `DirContext.getSchema("").lookup()`.  you can continue down to get further valid inputs. ie `DirContext.getSchema("").listBindings("ClassDefinition")` would show what you can call with `DirContext.getSchema("").lookup("ClassDefinition/<valid input here>")`
![](find%20what%20you%20can%20query%20with%20jndi%20'lookup'.mp4)
to get the object class name for an attribute's mapped object class (find what object class user is translated to in edirectory), the xnds_name field in the object class will name the attribute, not the other way around. 
![](Pasted%20image%2020230712153016.png)

you can set searches to return objects with `SearchContext` object.
```java
SearchControls searchControls = new SearchControls();  
searchControls.setReturningObjFlag(true);
context.search("", "(objectclass=*)", searchControls)
```
[JNDI tutorial page](https://docs.oracle.com/javase/jndi/tutorial/objects/reading/search.html) || [Oracle Docs](https://docs.oracle.com/javase/8/docs/api/javax/naming/directory/SearchControls.html#setReturningObjFlag-boolean-)

### LDAP status codes
[source](https://docs.oracle.com/javase/jndi/tutorial/ldap/models/exceptions.html)

| LDAP Status Code | Meaning                                   | Exception or Action                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| ---------------- | ----------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 0                | Success                                   | Report success.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| 1                | Operations error                          | [NamingException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/NamingException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/NamingException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 2                | Protocol error                            | [CommunicationException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/CommunicationException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/CommunicationException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 3                | Time limit exceeded.                      | [TimeLimitExceededException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/TimeLimitExceededException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/TimeLimitExceededException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 4                | Size limit exceeded.                      | [SizeLimitExceededException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/SizeLimitExceededException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/SizeLimitExceededException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 5                | Compared false.                           | Used by [DirContext.search()](http://java.sun.com/j2se/1.3/docs/api/javax/naming/directory/DirContext.html#search(javax.naming.Name, javax.naming.directory.Attributes))[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/directory/DirContext.html#search(javax.naming.Name, javax.naming.directory.Attributes)). Does not generate an exception.                                                                                                                                                                                                                                                                                                                 |
| 6                | Compared true.                            | Used by [DirContext.search()](http://java.sun.com/j2se/1.3/docs/api/javax/naming/directory/DirContext.html#search(javax.naming.Name, javax.naming.directory.Attributes))[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/directory/DirContext.html#search(javax.naming.Name, javax.naming.directory.Attributes)). Does not generate an exception.                                                                                                                                                                                                                                                                                                                 |
| 7                | Authentication method not supported.      | [AuthenticationNotSupportedException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/AuthenticationNotSupportedException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/AuthenticationNotSupportedException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 8                | Strong authentication required.           | [AuthenticationNotSupportedException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/AuthenticationNotSupportedException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/AuthenticationNotSupportedException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 9                | Partial results being returned.           | If the environment property "java.naming.referral" is set to "ignore" or the contents of the error do not contain a referral, throw a [PartialResultException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/PartialResultException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/PartialResultException.html). Otherwise, use contents to build a referral.                                                                                                                                                                                                                                                                                         |
| 10               | Referral encountered.                     | If the environment property "java.naming.referral" is set to "ignore", then ignore. If the property is set to "throw", throw [ReferralException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/ReferralException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/ReferralException.html). If the property is set to "follow", then the LDAP provider processes the referral. If the "java.naming.ldap.referral.limit" property has been exceeded, throw [LimitExceededException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/LimitExceededException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/LimitExceededException.html). |
| 11               | Administrative limit exceeded.            | [LimitExceededException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/LimitExceededException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/LimitExceededException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| 12               | Unavailable critical extension requested. | [OperationNotSupportedException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/OperationNotSupportedException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/OperationNotSupportedException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 13               | Confidentiality required.                 | [AuthenticationNotSupportedException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/AuthenticationNotSupportedException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/AuthenticationNotSupportedException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 14               | SASL bind in progress.                    | Used internally by the LDAP provider during authentication.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| 16               | No such attribute exists.                 | [NoSuchAttributeException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/directory/NoSuchAttributeException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/directory/NoSuchAttributeException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 17               | An undefined attribute type.              | [InvalidAttributeIdentifierException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/directory/InvalidAttributeIdentifierException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/directory/InvalidAttributeIdentifierException.html)                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 18               | Inappropriate matching                    | [InvalidSearchFilterException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/directory/InvalidSearchFilterException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/directory/InvalidSearchFilterException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 19               | A constraint violation.                   | [InvalidAttributeValueException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/directory/InvalidAttributeValueException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/directory/InvalidAttributeValueException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 20               | An attribute or value already in use.     | [AttributeInUseException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/directory/AttributeInUseException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/directory/AttributeInUseException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 21               | An invalid attribute syntax.              | [InvalidAttributeValueException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/directory/InvalidAttributeValueException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/directory/InvalidAttributeValueException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| 32               | No such object exists.                    | [NameNotFoundException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/NameNotFoundException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/NameNotFoundException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 33               | Alias problem                             | [NamingException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/NamingException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/NamingException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 34               | An invalid DN syntax.                     | [InvalidNameException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/InvalidNameException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/InvalidNameException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 35               | Is a leaf.                                | Used by the LDAP provider; usually doesn't generate an exception.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| 36               | Alias dereferencing problem               | [NamingException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/NamingException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/NamingException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 48               | Inappropriate authentication              | [AuthenticationNotSupportedException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/AuthenticationNotSupportedException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/AuthenticationNotSupportedException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| 49               | Invalid credentials                       | [AuthenticationException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/AuthenticationException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/AuthenticationException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| 50               | Insufficient access rights                | [NoPermissionException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/NoPermissionException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/NoPermissionException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| 51               | Busy                                      | [ServiceUnavailableException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/ServiceUnavailableException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/ServiceUnavailableException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 52               | Unavailable                               | [ServiceUnavailableException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/ServiceUnavailableException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/ServiceUnavailableException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| 53               | Unwilling to perform                      | [OperationNotSupportedException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/OperationNotSupportedException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/OperationNotSupportedException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 54               | Loop detected.                            | [NamingException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/NamingException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/NamingException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 64               | Naming violation                          | [InvalidNameException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/InvalidNameException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/InvalidNameException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 65               | Object class violation                    | [SchemaViolationException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/directory/SchemaViolationException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/directory/SchemaViolationException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 66               | Not allowed on non-leaf.                  | [ContextNotEmptyException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/ContextNotEmptyException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/ContextNotEmptyException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 67               | Not allowed on RDN.                       | [SchemaViolationException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/directory/SchemaViolationException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/directory/SchemaViolationException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 68               | Entry already exists.                     | [NameAlreadyBoundException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/NameAlreadyBoundException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/NameAlreadyBoundException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| 69               | Object class modifications prohibited.    | [SchemaViolationException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/directory/SchemaViolationException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/directory/SchemaViolationException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| 71               | Affects multiple DSAs.                    | [NamingException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/NamingException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/NamingException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| 80               | Other                                     | [NamingException](http://java.sun.com/j2se/1.3/docs/api/javax/naming/NamingException.html)[api](http://java.sun.com/j2se/1.3/docs/api/javax/naming/NamingException.html)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
|                  |                                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|                  |                                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|                  |                                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
|                  |                                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| 


### LDAP syntax notes
[Attribute Syntax Data Types ](https://www.novell.com/documentation/developer/ndslib/schm_enu/data/h55cqjqs.html)

| Data Type         | Description                                                                                                         |
|:----------------- |:------------------------------------------------------------------------------------------------------------------- |
| dstring           | A UTF8 encoded string.                                                                                              |
| distinguishedname | LDAP string format of the distinguished name (CN=Kim, OU=Sales, O=Widget, Inc.). See [RFC 2253](https://www.ietf.org/rfc/rfc2253.txt) for more information. |
| LDAPDN            | LDAP format of the distinguished name (CN=Kim, OU=Sales, O=Widget, Inc.), BER encoded                               |
| LDAPString        | A type and length preceded string, BER encoded                                                                      |
| octetstring       | Opaque data in an application-defined format                                                                        |
| unit16string      | A numeric string with an upper bound of 65535                                                                       |
| uint32string      | A numeric string with an upper bound of 429467295                                                                   |




